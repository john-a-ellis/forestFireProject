<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Wildfire Causes and Effects in Canada</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>

<body>

  <div class="container">
    <div class="row">
      <div class="col-md-12 jumbotron text-center">
        <h1>Wildfire Causes and Effects in Canada</h1>
        <p>Use the interactive charts below to explore the dataset</p>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <select id="yearDropdown" class="form-control">
          <option value="1960-1965">1960-1965</option>
          <option value="1965-1970">1965-1970</option>
          <option value="1970-1975">1970-1975</option>
          <option value="1975-1980">1975-1980</option>
          <option value="1980-1985">1980-1985</option>
          <option value="1985-1990">1985-1990</option>
          <option value="1990-1995">1990-1995</option>
          <option value="1995-2000">1995-2000</option>
          <option value="2000-2005">2000-2005</option>
          <option value="2005-2010">2005-2010</option>
          <option value="2010-2015">2010-2015</option>
          <option value="2015-2020">2015-2020</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class="col-md-5">
        <div id="bar"></div>
      </div>
      <div class="col-md-5">
        <div id="line"></div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div id="heatmap"></div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div id="pie"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script>
    // Render the Plotly charts
    function renderCharts() {
      // Sample data for the bar chart
      var barData = {
        x: [1960, 1970, 1980, 1990, 2000, 2010, 2020],
        y: [100, 150, 130, 170, 200, 180, 190],
        type: 'bar',
        marker: { color: 'blue' },
        opacity: 0.5
      };
      var barLayout = {
        title: 'Total Square Kilometers Burned per Year (1960-2021)',
        xaxis: { title: 'Year' },
        yaxis: { title: 'Square Kilometers Burned' }
      };
      Plotly.newPlot('bar', [barData], barLayout);

      // Sample data for the line chart
      var lineData = {
        x: [1960, 1970, 1980, 1990, 2000, 2010, 2020],
        y: [50, 60, 55, 70, 80, 75, 85],
        type: 'scatter',
        mode: 'lines+markers',
        yaxis: 'y2',
        marker: { color: 'red' }
      };
      var lineLayout = {
        yaxis2: {
          title: 'Count of Fires',
          overlaying: 'y',
          side: 'right',
          showgrid: false,
          showline: true,
          linecolor: 'red'
        },
        barmode: 'group'
      };
      Plotly.newPlot('line', [lineData], lineLayout);

      // Sample data for the pie chart
      var pieData = [{
        values: [25, 35, 20, 20],
        labels: ['Human (H)', 'Human with Power Line (H-PH)', 'Unknown (U)', 'Lightning (L)'],
        type: 'pie'
      }];
      var pieLayout = {
        title: 'Primary Causes of Wildfires',
        showlegend: true,
        legend: { x: 1.3, y: 0.9, traceorder: 'normal', font: { size: 8 } }
      };
      Plotly.newPlot('pie', pieData, pieLayout);

      // Add an event listener to the dropdown menu
      document.getElementById('yearDropdown').addEventListener('change', updateCharts);
    }

    function updateCharts() {
      var selectedYear = document.getElementById('yearDropdown').value;
      console.log('Selected Year:', selectedYear);

      // Sample data for the updated bar chart
      var newBarData = {
        x: [1960, 1970, 1980, 1990, 2000, 2010, 2020],
        y: [150, 200, 180, 190, 210, 220, 230], // Update this data based on the selected year
        type: 'bar',
        marker: { color: 'blue' },
        opacity: 0.5
      };
      Plotly.react('bar', [newBarData]);

      // Sample data for the updated line chart
      var newLineData = {
        x: [1960, 1970, 1980, 1990, 2000, 2010, 2020],
        y: [60, 70, 75, 85, 90, 95, 100], // Update this data based on the selected year
        type: 'scatter',
        mode: 'lines+markers',
        yaxis: 'y2',
        marker: { color: 'red' }
      };
      Plotly.react('line', [newLineData]);

      // Sample data for the updated pie chart
      var newPieData = [{
        values: [30, 40, 25, 25], // Update this data based on the selected year
        labels: ['Human (H)', 'Human with Power Line (H-PH)', 'Unknown (U)', 'Lightning (L)'],
        type: 'pie'
      }];
      Plotly.react('pie', newPieData);
    }

    // Call the renderCharts function when the page is loaded
    document.addEventListener('DOMContentLoaded', renderCharts);

  </script>
</body>

</html>
